{
  "kind": "build_request",
  "title": "Enable stable backend build/deploy metadata updates for Live publishing verification",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-12",
      "text": "Add a backend (Motoko) admin-only update method for canister build/deploy metadata so the Live Status UI can reliably verify what version is running after publishing to Live.",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-1"
        ],
        "quotes": [
          "Yes"
        ]
      },
      "acceptanceCriteria": [
        "backend/main.mo exposes a new shared method (admin-only) that updates canisterBuildMetadata (commitHash, buildTime, dfxVersion).",
        "Calling the new update method as a non-admin traps with an English Unauthorized message.",
        "getCanisterBuildMetadata continues to be a public query and always returns a valid CanisterBuildMetadata record with sensible defaults when fields have not been set (commitHash=\"\", buildTime=0, dfxVersion=\"\").",
        "The existing frontend query useGetCanisterBuildMetadata (frontend/src/hooks/useQueries.ts) continues to work without any candid/type mismatches."
      ]
    }
  ],
  "constraints": [
    "Backend must remain a single-actor Motoko canister (all logic in backend/main.mo).",
    "Do not modify any frontend files under frontend/src/hooks/useInternetIdentity.ts, frontend/src/hooks/useInternetIdentity.tsx, frontend/src/hooks/useActor.ts, frontend/src/main.tsx, or any files in frontend/src/components/ui.",
    "Use English for any user-facing text."
  ],
  "nonGoals": [
    "Implementing the actual Caffeine platform 'Publish to Live' action inside the app UI.",
    "Adding new authentication providers beyond Internet Identity.",
    "Changing gameplay, wallet, deposit/withdrawal, or lobby/tournament behavior."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  },
  "userProfileUpdate": {
    "goalsToAdd": [],
    "goalsToRemove": [],
    "preferencesToAdd": [],
    "preferencesToRemove": [],
    "miscToAdd": [],
    "miscToRemove": [],
    "fieldsToSet": {},
    "fieldsToDelete": []
  }
}